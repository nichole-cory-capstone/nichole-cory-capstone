<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" lang="en">
<head>
</head>
<body>
<nav th:fragment="navbar-partial">

    <div id="launch button" class="ui application pushed left right sidebar vertical inverted labeled icon menu">
        <a href="/" class="item"><button type="button" class="ui inverted button">Home</button></a>
        <a href="/user/profile" class="item" sec:authorize="isAuthenticated()"><button type="button" class="ui inverted button">Profile</button></a>
        <a href="/search" class="item"><button type="button" class="ui inverted button">Search</button></a>
        <a href="/about" class="item"><button type="button" class="ui inverted button">About</button></a>
        <a href="#" id="modalbutton" class="item" sec:authorize="isAnonymous()"><button type="button" class="ui inverted button">Log In</button></a>
            <form class="item" th:action="@{/logout}" th:method="post" sec:authorize="isAuthenticated()">
            <button type="submit" class="ui inverted button">Log Out</button>
            </form>
        <div class="dimmed pusher"></div>
        </div>
    <br />
    <button type="button" class="ui submit button gobackbutton" id="backbutton" onclick="history.back();"> Back </button>
    <button type="button" class="ui submit button" id="sidebutton"> > </button>
    <a class="navbar-brand" href="/"><h1>CADDY</h1></a>
    <br />
    <hr />

    <!--semantic modal-->
    <div class="ui demo modal button tiny loginmodal">
        <button type="button" class="close modalclose" data-dismiss="modal">X</button>
        <div class="ui aligned center">
                <h2 class="ui image header"><div class="content">Log in to your account</div></h2>
            <form class="ui form" th:action="@{/login}" method="post">
                <div class="ui segment">
                    <div class="field">
                        <!--<div class="ui left icon input">-->
                            <!--<i class="user icon"></i>-->
                            <input type="text" name="username" placeholder="Username"/>
                        <!--</div>-->
                    </div>
                    <div class="field">
                        <!--<div class="ui left icon input">-->
                            <!--<i class="lock icon"></i>-->
                            <input type="password" name="password" placeholder="Password"/>
                        <!--</div>-->
                    </div>
                    <div id="login" class="ui fluid large submit button">Login</div>
                </div>
                <div class="ui error message"></div>
            </form>

            <div class="ui tiny message">
                New to us? <a href="/register">Sign Up</a>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {

//            $('#backbutton').click(function() {
//                $('.ui.gobackbutton').window.history.back();
//            });

            $('#sidebutton').click(function() {
                $('.ui.sidebar').sidebar('toggle', 'setting', 'transition', 'overlay');
            });

            $('#modalbutton').click(function() {
                $('.loginmodal').modal('toggle');
            });

                    $('#login').click(function(){
                        window.location = "/login";
                    });
                    $('.ui.form')
                        .form({
                            fields: {
                                email: {
                                    identifier  : 'username',
                                    rules: [
                                        {
                                            type   : 'empty',
                                            prompt : 'Please enter your username'
                                        }
                                    ]
                                },
                                password: {
                                    identifier  : 'password',
                                    rules: [
                                        {
                                            type   : 'empty',
                                            prompt : 'Please enter your password'
                                        },
                                        {
                                            type   : 'length[8]',
                                            prompt : 'Your password must be at least 8 characters'
                                        }
                                    ]
                                }
                            }
                        })
                    ;
                });
    </script>
    </nav>
</body>
</html>